#!/bin/bash
read -p "
   [0;33mAdds Trixie backport repository, and installs the latest kernel.[0m
   
   Note * Do not install this kernel first if planning on using the
   Liquorix or Xanmod kernels. (backports dependency conflicts)
     
   This script will add the trixie Backports repository and install 
   the trixie backports kernel, headers, and firmware if available.

   [0;31mhttps://backports.debian.org/Instructions/[0m
     
   [0;32m----------------------------------------------------------------
   
   Press Enter to add Trixie backports and install the kernel.
   
   ----------------------------------------------------------------[0m
   
   Or, close this terminal window to quit." ;
   if : >/dev/tcp/8.8.8.8/53; then
echo ""
   echo ""
   echo ""
   sudo cp -f "/usr/share/lilidog/extras/backports/trixie-backports.sources" "/etc/apt/sources.list.d" &&  
   sudo apt update
   echo ""
   echo ""
   echo ""
   echo "-------------------------------------------------------------------------------"
   echo "
                     [0;33m---trixie Backports Enabled---[0m
         
   [0;36mRepository added to /etc/apt/sources.list.d/trixie-backports.list[0m"
   echo ""
   echo "-------------------------------------------------------------------------------"
   echo ""
   sudo apt install -t trixie-backports linux-image-amd64/trixie-backports linux-headers-amd64/trixie-backports libc6-dev firmware-linux
   echo ""
   echo "[0;33mPlease reboot into your new kernel when able.[0m"
echo ""
echo "[0;36mYou may need to look in 'Advanced Options' upon reboot if you"
echo "have installed a higher numbered kernel previously."
echo ""
echo "Grub boots the highest numbered kernel version automatically.[0m"
echo ""
echo "To remove this kernel, reboot to your old kernel through the"
echo "advanced menu at the grub boot screen."
echo ""
echo "Then use apt or the kernel remover located in the menu under"
echo "utilities to remove the offending kernel."
echo ""
echo ""
echo ""
echo ""
else
echo ""
 echo "   [0;31m-----------------------------------------------------[0m"
 echo ""
 echo "   [0;33mNo Internet connection. Please connect and try again.[0m"
 echo ""
 echo "   [0;31m-----------------------------------------------------[0m"
echo ""
fi
read -n1 -p " Press any key to quit this dialog ... "
